{"title":"A template ChronoGPU project to run on Agave","markdown":{"headingText":"A template ChronoGPU project to run on Agave","containsRefs":false,"markdown":"\n\n### To test run the template project on Agave\n\n:::{.callout-warning}\nIn order to use the google drive and git as instructed, you need to update your personal configure files for `rclone` and `git` on the **cluster**  first. \n:::\n\n:::{.callout-note}\nIf you prefer to use GUI tools for `git` operations, neglect the corresponding command line instructions below and go ahead and use the GUI tools you are familiar with. Do note that using the command line could potentially streamline your workflow and improve your efficiency further.\n:::\n\n1. Logon to the Agave cluster\n\n```bash\nssh your.username@asu.agave.edu\n```\n\n2. Navigate to your workspace\n\n   For example,\n\n```bash\ncd Workspace/Chrono\n```\n\n:::{callout-note}\nYour working directory may be different from mine. It is recommended to have a directory called something like \"Workspace\" in your home directory to host all your projects\n:::\n\n3. Clone this repo\n\n```bash\ngit clone https://github.com/JulianTao/chgpu_agave_template.git\n```\n\n4. Navigate to the new directory\n\n```bash\ncd chgpu_agave_template\n```\n5. Examine the directory structure\n\n```bash\nls -al\n```\n   It includes:\n\n   * a CMakeList.txt\n   * a bash file to be run by `sbatch`\n   * a .gitignore file to ignore the output and log files for git operations\n   * source files \n     * repose.cpp\n     * GpuDemoUtils.hpp\n     * repose.json\n6. Edit `repose.sh` if needed, following the instructions inside\n\n8. Run the bash file\n\n```bash\nsbatch repose.sh\n```\n8. Examine the `OUTPUT` directory and the log files `.err` and `.out`.\n9. Examine the shared google drive, there should be a new folder data folder with the name specified in the bash script. \n\n### To create your own project based on the template \n\n:::{.callout-warning}\nIn order to use git as instructed below, you need to configure `git` first **on your computer**. \n:::\n\n1. On GitHub, navigate to the main page of the repository. [chgpu_agave_template](https://github.com/JulianTao/chgpu_agave_template) \n2. Above the file list, click `Use this template`, which usually appears in green.\n4. Type a name for your repository, and an optional description. The project name should be concise but indicative, e.g., \"sample_prep\". For a more comprehensive instruction on how to create a repo from a template, check [here](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template) \n\n:::{.callout-note}\nInstead of using \"template\", you can also \"fork\" the repo and then update the settings such as repo name etc. There are some differences though, as discussed [here](https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template) \n:::\n\n6. **On your own computer**, clone the new repo. \n7. Rename the `cpp`,`json`, `sh` files with your project name. \n   For example, `repose.cpp` --> `sample_prep.cpp`; `repose.json` --> `sample_prep.json`; and `repose.sh` --> `sample_prep.json`\n8. Edit the source `cpp` and `json` files for your project.\n9. Update the `CMakeList.txt` file:\n\n   Replace the word `repose` with your project name.\n\n   For example, change\n\n```CMake\nset(MY_PROJECT repose)\n```\nto\n\n```CMake\nset(MY_PROJECT sample_prep)\n```\n7. Update the `repose.sh` file\n\n  * Search and replace all instances of `repose` with your project name, e.g., `sample_prep`\n  * Update the slurm requests as shown in the example bash script.\n\n8. Commit the changes and push to the github repo.\n\n```bash\ngit add --all\ngit commit -m 'update to sample_prep'\ngit push\n```\n9. Repeat the steps the same as in the \"test run\" example above, except that you work on the new project repo.\n10. Congratulations, you run your first ChronoGPU project on Agave.\n"},"formats":{"html":{"execute":{"fig.width":7,"fig.height":5,"fig.format":"retina","fig.dpi":96,"error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"engine":"markdown"},"render":{"keep-tex":false,"keep-yaml":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","code-fold":"none","code-summary":"Code","code-overflow":"scroll","code-link":false,"code-tools":false,"merge-includes":true,"self-contained-math":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false},"pandoc":{"from":"markdown","standalone":true,"to":"html","css":["styles.css"],"toc":true,"output-file":"agave.html"},"metadata":{"theme":"cosmo"},"extensions":{"book":{"multiFile":true}}}}}